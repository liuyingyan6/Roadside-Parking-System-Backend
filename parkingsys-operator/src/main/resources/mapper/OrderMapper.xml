<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.woniuxy.operator.mapper.OrderMapper">

    <resultMap id="OrderResultMap" type="OrderVO">
        <id property="id" column="id" />
        <result property="orderNumber" column="order_number" />
        <result property="inspectorId" column="inspector_id" />
        <result property="roadId" column="road_id" />
        <result property="carId" column="car_id" />
        <result property="status" column="status" />
        <result property="orderAmount" column="order_amount" />
        <result property="payType" column="pay_type" />
        <result property="parkingId" column="parking_id" />
        <result property="createTime" column="create_time" />
        <result property="updateTime" column="update_time" />
        <result property="logicDelete" column="logic_delete" />
    </resultMap>

    <select id="findAllPage" resultMap="OrderResultMap">
        SELECT
        o.*,
        pa.number AS parking_number,
        ins.name AS inspector_name ,
        ro.`name` AS road_name,
        car.`car_number` AS carNumber
        FROM
        `t_order` o
        INNER JOIN
        parking pa ON o.parking_id = pa.id
        INNER JOIN
        inspector ins ON o.inspector_id = ins.id
        INNER JOIN
        road ro ON o.road_id = ro.id
        INNER JOIN
        car  ON o.`car_id` = car.id
        <where>

            <if test="orderDTO.orderNumber !=null and orderDTO.orderNumber !=''">
                o.order_number = #{orderNumber}
            </if>
        </where>

    </select>
    <select id="findAll" resultMap="OrderResultMap">
        SELECT
            o.*,
            pa.number AS parking_number,
            ins.name AS inspector_name ,
            ro.`name` AS road_name,
            car.`car_number` AS carNumber
        FROM
            `t_order` o
                INNER JOIN
            parking pa ON o.parking_id = pa.id
                INNER JOIN
            inspector ins ON o.inspector_id = ins.id
                INNER JOIN
            road ro ON o.road_id = ro.id
                INNER JOIN
            car  ON o.`car_id` = car.id
    </select>
</mapper>
